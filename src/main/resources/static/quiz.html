<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Quiz Application</title>
    <link rel="stylesheet" type="text/css" href="quiz.css">
</head>
<body onload="initApp()">

<div id="editQuizWindow" class="modal">
    <span class="close" onclick="showQuizList(false)" title="Close">&times;</span>
    <form class="modal-content animate">
        <h1>Редактор викторины</h1>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-name">Название:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content,tooltip">
                    <div class="tooltip" style="width: 100%">
                        <input type="text" id="editQuizWindow-name" name="name" required>
                        <span class="tooltip-text" id="editQuizWindow-nameTooltip">Введите имя викторины</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-minPlayers">Минимум игроков:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content">
                    <input type="number" id="editQuizWindow-minPlayers" name="minPlayers" min="0">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-maxPlayers">Максимум игроков:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content">
                    <input type="number" id="editQuizWindow-maxPlayers" name="maxPlayers" min="0">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-questionType">Выбор вопросов:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content">
                    <select id="editQuizWindow-questionType" name="questionType" required>
                        <option disabled selected value="EMPTY">Выберите тип</option>
                        <option value="QUIZ">Из списка</option>
                        <option value="SOME">Случайно</option>
                        <option value="ALL">Все вопросы</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-questionNumber">Количество вопросов:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content">
                    <input type="number" id="editQuizWindow-questionNumber" name="questionNumber" min="0">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 30%">
                <div class="table-cell-content, right_label">
                    <label for="editQuizWindow-status">Статус:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 70%">
                <div class="table-cell-content">
                    <select id="editQuizWindow-status" name="status" required>
                        <option value="DRAFT" selected>Черновик</option>
                        <option value="ACTIVE">Активная</option>
                        <option value="STARTED">Начата</option>
                        <option value="FINISHED">Окончена</option>
                    </select>
                </div>
            </div>
        </div>
        <button onclick="saveQuiz()" type="button" id="editQuizWindow-submit" class="dialog-button">Сохранить</button>
        <button onclick="showQuizList(false)" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>

<div id="questionWindow" class="modal">
    <span class="close" onclick="showQuizList(false)" title="Close">&times;</span>
    <form class="modal-content animate">
        <div id="questionWindow-view">
            <p>
                вопрос #1
            </p>
            <button onclick="doRequestAnswer()" type="button" value="0" class="dialog-button">а) неверный ответ</button>
            <button onclick="doRequestAnswer()" type="button" value="1" class="dialog-button" disabled>б) верный ответ</button>
        </div>
        <button onclick="showQuizList(false)" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>
<div style="right: 100px; position: absolute;">
<p>Nickname: Lox</p>
</div>
</body>
</html>
<script type="text/javascript" src="common.js"></script>
<script>
    var currentQuiz = {element:null, quizId:null, view:null}
    var editQuizWindow = {element:null, quizId:null, name:null, minPlayers:null, maxPlayers:null, questionType:null,
                          questionNumber:null, status:null, selectQuestions:null, submit:null}
    var quizParticipant = {quiz:null, user:null, status:null}

    function initApp() {
        currentQuiz.element = document.getElementById("questionWindow");
        currentQuiz.view = document.getElementById("questionWindow-view")

        editQuizWindow.element = document.getElementById("editQuizWindow");
        editQuizWindow.name = document.getElementById("editQuizWindow-name")
        editQuizWindow.minPlayers = document.getElementById("editQuizWindow-minPlayers")
        editQuizWindow.maxPlayers = document.getElementById("editQuizWindow-maxPlayers")
        editQuizWindow.questionType = document.getElementById("editQuizWindow-questionType")
        editQuizWindow.questionNumber = document.getElementById("editQuizWindow-questionNumber")
        editQuizWindow.status = document.getElementById("editQuizWindow-status")
        editQuizWindow.submit = document.getElementById("editQuizWindow-submit")

        showModalWindow(editQuizWindow.element);
    }

    function doRequestAnswer(event) {
        event = event || window.event; // IE
        let target = event.target || event.srcElement; // IE
        let answerId = Number.parseInt(target.value);
        alert(answerId);
    }

    function saveQuiz() {
        let valid = true;
        if (!editQuizWindow.name.checkValidity()) {
            setLabelClass(editQuizWindow.name, 'label_wrong');
            valid = false;
        } else {
            setLabelClass(editQuizWindow.name, '');
        }
        // editQuizWindow.minPlayers
        // editQuizWindow.maxPlayers
        // editQuizWindow.questionType
        // editQuizWindow.questionsNumber
        // editQuizWindow.status
        // editQuizWindow.submit
    }
</script>