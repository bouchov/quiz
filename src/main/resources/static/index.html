<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Quiz Application</title>
    <link rel="stylesheet" type="text/css" href="quiz.css">
</head>
<body onload="initApp()">
<div id="mainMenu" class="modal">
    <form class="modal-content animate">
        <button onclick="showQuizList()" type="button" id="mainMenu-quiz" class="dialog-button">Викторина</button>
        <button onclick="goTo('/adm/quiz.html')" type="button" id="mainMenu-create" class="dialog-button">Новая викторина</button>
        <button onclick="showLoginWindow()" type="button" id="mainMenu-login" class="dialog-button">Войти</button>
    </form>
</div>
<div id="messageWindow" class="modal">
    <span class="close" onclick="hideMessageWindow()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div style="align-content: center; border: 1px solid #cccccc">
            <p id="messageWindow-text">&nbsp;</p>
        </div>
        <button id="messageWindow-button" onclick="hideMessageWindow()" type="button" class="dialog-button-close">Close</button>
    </form>
</div>
<div id="loginWindow" class="modal">
    <span class="close" onclick="showMainMenu()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="loginWindow-name">Логин:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 80%">
                <div class="table-cell-content">
                    <input type="text" id="loginWindow-name">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="loginWindow-password">Пароль:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 80%">
                <div class="table-cell-content">
                    <input type="password" id="loginWindow-password">
                </div>
            </div>
        </div>
        <button onclick="doRequestLogin()" type="button" class="dialog-button" id="loginWindow-submit">Войти</button>
        <button onclick="showRegisterWindow()" type="button" class="dialog-button">Регистрация</button>
    </form>
</div>
<div id="registerWindow" class="modal">
    <span class="close" onclick="showMainMenu()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="registerWindow-name">Логин:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 80%">
                <div class="table-cell-content">
                    <input type="text" id="registerWindow-name">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="registerWindow-nickname">Никнейм:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 80%">
                <div class="table-cell-content">
                    <input type="text" id="registerWindow-nickname">
                </div>
            </div>
        </div>
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="registerWindow-password">Пароль:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 80%">
                <div class="table-cell-content">
                    <input type="password" id="registerWindow-password">
                </div>
            </div>
        </div>
        <button onclick="doRequestRegister()" type="button" class="dialog-button" id="registerWindow-submit">Зарегистрироваться</button>
    </form>
</div>
<div id="quizListWindow" class="modal">
    <span class="close" onclick="showMainMenu()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div class="table-row">
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content, right_label">
                    <label for="quizListWindow-quizName">Название:</label>
                </div>
            </div>
            <div class="table-cell" style="width: 60%">
                <div class="table-cell-content">
                    <input type="text" id="quizListWindow-quizName">
                </div>
            </div>
            <div class="table-cell" style="width: 20%">
                <div class="table-cell-content">
                    <button onclick="searchQuiz()" type="button" class="search-button">Поиск</button>
                </div>
            </div>
        </div>

        <div id="quizListWindow-quizList">
            <button onclick="onSelectQuiz()" type="button" value="0" class="dialog-button">Викторина 1</button>
        </div>
        <button onclick="showMainMenu()" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>
<div id="quizWindow" class="modal">
    <span class="close" onclick="showQuizList(false)" title="Close">&times;</span>
    <form class="modal-content animate">
        <div id="quizWindow-view">
            <p>Название викторины</p>
            <p>Тип викторины</p>
        </div>
        <button onclick="doRequestRegisterQuiz()" type="button" id="quizWindow-start" class="dialog-button">Старт</button>
        <button onclick="showQuizList(false)" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>
<div id="questionWindow" class="modal">
    <span class="close" onclick="closeQuestionWindow()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div id="questionWindow-view">
            <p>
                вопрос #1
            </p>
            <button onclick="doRequestAnswer()" type="button" value="0" class="answer-button">а) неверный ответ</button>
            <button onclick="doRequestAnswer()" type="button" value="1" class="answer-button">б) верный ответ</button>
        </div>
        <button onclick="closeQuestionWindow()" type="button" class="dialog-button-close">Закрыть</button>
        <audio id="questionWindow-sound-right" preload="auto">
            <source src="/sounds/right.mp3" type="audio/mpeg">
            <source src="/sounds/right.wav" type="audio/wav">
        </audio>
        <audio id="questionWindow-sound-wrong" preload="auto">
            <source src="/sounds/wrong.mp3" type="audio/mpeg">
            <source src="/sounds/wrong.wav" type="audio/wav">
        </audio>
        <audio id="questionWindow-sound-tickTack" preload="auto" loop>
            <source src="/sounds/tick.mp3" type="audio/mpeg">
            <source src="/sounds/tick.wav" type="audio/wav">
        </audio>
    </form>
</div>
<div id="personalInfo" style="right: 100px; position: absolute;">
    <p>Гость</p>
</div>
</body>
</html>
<script type="text/javascript" src="quiz.js"></script>
<script>
    var webSocket = null;
    var modalWindow = {element:null};
    var mainMenu = {element:null, quiz:null, create:null, login:null};
    var personalInfo = {element:null, user:null};
    var messageWindow = {element:null, text:null, callback:null, button:null};
    var loginWindow = {element:null, userName:null, userPassword:null, submit:null, callback:null};
    var registerWindow = {element:null, userName:null, nickname:null, userPassword:null, submit:null, callback:null};
    var quizListWindow = {element:null, quizName:null, quizList:null};
    var quizWindow = {element:null, quizId:null, view:null, startButton:null};
    var questionWindow = {element:null, questionId:null, view:null, question:null, finished:false,
                    sounds:{right:null, wrong:null}}
    var quizList = [];

    function initApp() {
        mainMenu.element = document.getElementById('mainMenu');
        mainMenu.quiz = document.getElementById('mainMenu-quiz');
        mainMenu.login = document.getElementById('mainMenu-login');

        messageWindow.element = document.getElementById('messageWindow');
        messageWindow.text = document.getElementById('messageWindow-text');

        mainMenu.create = document.getElementById('mainMenu-create');
        personalInfo.element = document.getElementById("personalInfo");
        loginWindow.element = document.getElementById('loginWindow');
        loginWindow.userName = document.getElementById('loginWindow-name');
        loginWindow.userPassword = document.getElementById('loginWindow-password');
        loginWindow.submit = document.getElementById('loginWindow-submit');

        registerWindow.element = document.getElementById('registerWindow');
        registerWindow.userName = document.getElementById('registerWindow-name');
        registerWindow.nickname = document.getElementById('registerWindow-nickname');
        registerWindow.userPassword = document.getElementById('registerWindow-password');
        registerWindow.submit = document.getElementById('registerWindow-submit');

        quizListWindow.element = document.getElementById('quizListWindow');
        quizListWindow.quizName = document.getElementById('quizListWindow-quizName');
        quizListWindow.quizList = document.getElementById('quizListWindow-quizList');

        quizWindow.element = document.getElementById('quizWindow');
        quizWindow.view = document.getElementById('quizWindow-view');
        quizWindow.startButton = document.getElementById('quizWindow-start');

        questionWindow.element = document.getElementById('questionWindow');
        questionWindow.view = document.getElementById('questionWindow-view');
        questionWindow.sounds.right = document.getElementById('questionWindow-sound-right');
        questionWindow.sounds.wrong = document.getElementById('questionWindow-sound-wrong');
        questionWindow.sounds.tickTack = document.getElementById('questionWindow-sound-tickTack');

        document.onkeyup = keyPressed;
        showModalWindow(mainMenu.element);
    }

</script>