<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Quiz Application</title>
    <link rel="stylesheet" type="text/css" href="quiz.css">
</head>
<body onload="initApp()">
<div id="mainMenu" class="modal">
    <form class="modal-content animate">
        <button onclick="showQuizList()" type="button" id="mainMenu-quiz" class="dialog-button">Викторина</button>
        <button onclick="goTo('/adm/quiz.html')" type="button" id="mainMenu-create" class="dialog-button">Новая викторина</button>
    </form>
</div>
<div id="messageWindow" class="modal">
    <span class="close" onclick="hideMessageWindow()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div style="align-content: center; border: 1px solid #cccccc">
            <p id="messageWindow-text">&nbsp;</p>
        </div>
        <button id="messageWindow-button" onclick="hideMessageWindow()" type="button" class="dialog-button-close">Close</button>
    </form>
</div>
<div id="loginWindow" class="modal">
    <span class="close" onclick="hideModalWindow()" title="Close">&times;</span>
    <form class="modal-content animate">
        <label for="loginWindow-name">Логин:</label><input type="text" id="loginWindow-name">
        <label for="loginWindow-password">Пароль:</label><input type="password" id="loginWindow-password">
        <button onclick="doRequestLogin()" type="button" class="dialog-button" id="loginWindow-loginButton">Войти</button>
    </form>
</div>
<div id="quizListWindow" class="modal">
    <span class="close" onclick="showMainMenu()" title="Close">&times;</span>
    <form class="modal-content animate">
        <label for="quizListWindow-quizName">Название:</label><input type="text" id="quizListWindow-quizName">
        <input onclick="searchQuiz()" type="button" value="Поиск">
        <div id="quizListWindow-quizList">
            <button onclick="onSelectQuiz()" type="button" value="0" class="dialog-button">Викторина 1</button>
        </div>
        <button onclick="showMainMenu()" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>
<div id="quizWindow" class="modal">
    <span class="close" onclick="showQuizList(false)" title="Close">&times;</span>
    <form class="modal-content animate">
        <div id="quizWindow-view">
            <p>Название викторины</p>
            <p>Тип викторины</p>
        </div>
        <button onclick="doRequestRegisterQuiz()" type="button" id="quizWindow-start" class="dialog-button">Старт</button>
        <button onclick="showQuizList(false)" type="button" class="dialog-button-close">Закрыть</button>
    </form>
</div>
<div id="questionWindow" class="modal">
    <span class="close" onclick="closeQuestionWindow()" title="Close">&times;</span>
    <form class="modal-content animate">
        <div id="questionWindow-view">
            <p>
                вопрос #1
            </p>
            <button onclick="doRequestAnswer()" type="button" value="0" class="answer-button">а) неверный ответ</button>
            <button onclick="doRequestAnswer()" type="button" value="1" class="answer-button">б) верный ответ</button>
        </div>
        <button onclick="closeQuestionWindow()" type="button" class="dialog-button-close">Закрыть</button>
        <audio id="questionWindow-sound-right" preload="auto">
            <source src="/sounds/right.mp3" type="audio/mpeg">
            <source src="/sounds/right.wav" type="audio/wav">
        </audio>
        <audio id="questionWindow-sound-wrong" preload="auto">
            <source src="/sounds/wrong.mp3" type="audio/mpeg">
            <source src="/sounds/wrong.wav" type="audio/wav">
        </audio>
        <audio id="questionWindow-sound-tickTack" preload="auto" loop>
            <source src="/sounds/tick.mp3" type="audio/mpeg">
            <source src="/sounds/tick.wav" type="audio/wav">
        </audio>
    </form>
</div>
<div id="personalInfo" style="right: 100px; position: absolute;">
    <p>Гость</p>
</div>
</body>
</html>
<script type="text/javascript" src="quiz.js"></script>
<script>
    var webSocket = null;
    var modalWindow = {element:null};
    var mainMenu = {element:null, buttonQuiz:null, buttonCreate:null};
    var personalInfo = {element:null};
    var messageWindow = {element:null, text:null, callback:null, button:null};
    var loginWindow = {element:null, userName:null, userPassword:null, loginButton:null, callback:null};
    var quizListWindow = {element:null, quizName:null, quizList:null};
    var quizWindow = {element:null, quizId:null, view:null, startButton:null};
    var questionWindow = {element:null, questionId:null, view:null, question:null, finished:false,
                    sounds:{right:null, wrong:null}}
    var quizList = [];

    function initApp() {
        mainMenu.element = document.getElementById('mainMenu');
        mainMenu.buttonQuiz = document.getElementById('mainMenu-quiz');

        messageWindow.element = document.getElementById('messageWindow');
        messageWindow.text = document.getElementById('messageWindow-text');

        mainMenu.buttonCreate = document.getElementById('mainMenu-create');
        personalInfo.element = document.getElementById("personalInfo");
        loginWindow.element = document.getElementById('loginWindow');
        loginWindow.userName = document.getElementById('loginWindow-name');
        loginWindow.userPassword = document.getElementById('loginWindow-password');
        loginWindow.loginButton = document.getElementById('loginWindow-loginButton');

        quizListWindow.element = document.getElementById('quizListWindow');
        quizListWindow.quizName = document.getElementById('quizListWindow-quizName');
        quizListWindow.quizList = document.getElementById('quizListWindow-quizList');

        quizWindow.element = document.getElementById('quizWindow');
        quizWindow.view = document.getElementById('quizWindow-view');
        quizWindow.startButton = document.getElementById('quizWindow-start');

        questionWindow.element = document.getElementById('questionWindow');
        questionWindow.view = document.getElementById('questionWindow-view');
        questionWindow.sounds.right = document.getElementById('questionWindow-sound-right');
        questionWindow.sounds.wrong = document.getElementById('questionWindow-sound-wrong');
        questionWindow.sounds.tickTack = document.getElementById('questionWindow-sound-tickTack');

        document.onkeyup = keyPressed;
        showModalWindow(mainMenu.element);
    }

</script>